<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Sensitivity Analysis | Applied Propensity Score Analysis with R</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="jbryer">
        <meta name="description" content="Author: Jason Bryer (&lt;jason@bryer.org&gt;)  
Website: http://jason.bryer.org/psa/  
Github Repository: https://github.com/jbryer/psa  ">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../missing/missing.html" />
        
        
        <link rel="prev" href="../intro/visualizations.html" />
        

        <meta property="og:title" content="Sensitivity Analysis | Applied Propensity Score Analysis with R">
        <meta property="og:site_name" content="Applied Propensity Score Analysis with R">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/jbryer">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../gitbook/style.css">
        


        
    <div class="book" data-github="jbryer/psa" data-level="2" data-basepath=".." data-revision="1398868648460">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/jbryer/psa" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/jbryer/psa/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/jbryer/psa/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >Applied Propensity Score Analysis with R</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/jbryer" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/jbryer/psa/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/jbryer/psa/edit/master/sensitivity/sensitivity.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="../index.html"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="intro/intro.html">
                
                <a href="../intro/intro.html">
                    <i class="fa fa-check"></i> <b>1.</b> Overview
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="intro/experiments.html">
                            
                            <a href="../intro/experiments.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Randomize Experiments
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="intro/estimating.html">
                            
                            <a href="../intro/estimating.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Estimating Propensity Scores
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="intro/stratification.html">
                            
                            <a href="../intro/stratification.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Stratification
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="intro/matching.html">
                            
                            <a href="../intro/matching.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Matching Methods
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="intro/balance.html">
                            
                            <a href="../intro/balance.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Balance
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="intro/effects.html">
                            
                            <a href="../intro/effects.html">
                                <i class="fa fa-check"></i> <b>1.6.</b> Estimating Treatment Effects
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.7" data-path="intro/visualizations.html">
                            
                            <a href="../intro/visualizations.html">
                                <i class="fa fa-check"></i> <b>1.7.</b> Visualizing Results
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="sensitivity/sensitivity.html">
                
                <a href="../sensitivity/sensitivity.html">
                    <i class="fa fa-check"></i> <b>2.</b> Sensitivity Analysis
                </a>
                
                
            </li>
        
            <li  data-level="3" data-path="missing/missing.html">
                
                <a href="../missing/missing.html">
                    <i class="fa fa-check"></i> <b>3.</b> Missing Data
                </a>
                
                
            </li>
        
            <li  data-level="4" data-path="bootstrapping/psaboot.html">
                
                <a href="../bootstrapping/psaboot.html">
                    <i class="fa fa-check"></i> <b>4.</b> Boostrapping
                </a>
                
                
            </li>
        
            <li  data-level="5" data-path="multilevel/multilevelpsa.html">
                
                <a href="../multilevel/multilevelpsa.html">
                    <i class="fa fa-check"></i> <b>5.</b> Multilevel PSA
                </a>
                
                
            </li>
        
            <li  data-level="6" data-path="nonbinary/trimatch.html">
                
                <a href="../nonbinary/trimatch.html">
                    <i class="fa fa-check"></i> <b>6.</b> Non-Binary Treatments
                </a>
                
                
            </li>
        
            <li  data-level="7" data-path="references.html">
                
                <a href="../references.html">
                    <i class="fa fa-check"></i> <b>7.</b> References
                </a>
                
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 64.28571428571429%;min-width: 57.142857142857146%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../intro/intro.html" title="Overview" class="chapter done new-chapter" data-progress="1" style="left: 7.142857142857143%;"></a>
    
        <a href="../intro/experiments.html" title="Randomize Experiments" class="chapter done " data-progress="1.1" style="left: 14.285714285714286%;"></a>
    
        <a href="../intro/estimating.html" title="Estimating Propensity Scores" class="chapter done " data-progress="1.2" style="left: 21.428571428571427%;"></a>
    
        <a href="../intro/stratification.html" title="Stratification" class="chapter done " data-progress="1.3" style="left: 28.571428571428573%;"></a>
    
        <a href="../intro/matching.html" title="Matching Methods" class="chapter done " data-progress="1.4" style="left: 35.714285714285715%;"></a>
    
        <a href="../intro/balance.html" title="Balance" class="chapter done " data-progress="1.5" style="left: 42.857142857142854%;"></a>
    
        <a href="../intro/effects.html" title="Estimating Treatment Effects" class="chapter done " data-progress="1.6" style="left: 50%;"></a>
    
        <a href="../intro/visualizations.html" title="Visualizing Results" class="chapter done " data-progress="1.7" style="left: 57.142857142857146%;"></a>
    
        <a href="../sensitivity/sensitivity.html" title="Sensitivity Analysis" class="chapter done new-chapter" data-progress="2" style="left: 64.28571428571429%;"></a>
    
        <a href="../missing/missing.html" title="Missing Data" class="chapter  new-chapter" data-progress="3" style="left: 71.42857142857143%;"></a>
    
        <a href="../bootstrapping/psaboot.html" title="Boostrapping" class="chapter  new-chapter" data-progress="4" style="left: 78.57142857142857%;"></a>
    
        <a href="../multilevel/multilevelpsa.html" title="Multilevel PSA" class="chapter  new-chapter" data-progress="5" style="left: 85.71428571428571%;"></a>
    
        <a href="../nonbinary/trimatch.html" title="Non-Binary Treatments" class="chapter  new-chapter" data-progress="6" style="left: 92.85714285714286%;"></a>
    
        <a href="../references.html" title="References" class="chapter  new-chapter" data-progress="7" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_9">
                    
                        <h1 id="sensitivity-analysis">Sensitivity Analysis</h1>
<pre><code class="lang-r">&gt; <span class="hljs-keyword">require</span>(rbounds)
&gt; data(lalonde, package = <span class="hljs-string">"Matching"</span>)
&gt; 
&gt; Y &lt;- lalonde$re78  <span class="hljs-comment">#the outcome of interest</span>
&gt; Tr &lt;- lalonde$treat  <span class="hljs-comment">#the treatment of interest</span>
&gt; <span class="hljs-keyword">attach</span>(lalonde)
</code></pre>
<pre><code>The following objects are masked from lalonde (position 3):

    age, black, educ, married, re74, re75, re78, treat
</code></pre><pre><code class="lang-r">&gt; <span class="hljs-comment"># The covariates we want to match on</span>
&gt; X = cbind(age, educ, black, hisp, married, nodegr, u74, u75, re75, re74)
&gt; <span class="hljs-comment"># The covariates we want to obtain balance on</span>
&gt; BalanceMat &lt;- cbind(age, educ, black, hisp, married, nodegr, u74, u75, re75, 
+     re74, I(re74 * re75))
&gt; <span class="hljs-keyword">detach</span>(lalonde)
&gt; 
&gt; gen1 &lt;- GenMatch(Tr = Tr, X = X, BalanceMat = BalanceMat, pop.size = <span class="hljs-number">50</span>, data.type.int = <span class="hljs-literal">FALSE</span>, 
+     print = <span class="hljs-number">0</span>, replace = <span class="hljs-literal">FALSE</span>)
&gt; mgen1 &lt;- Match(Y = Y, Tr = Tr, X = X, Weight.matrix = gen1, replace = <span class="hljs-literal">FALSE</span>)
&gt; summary(mgen1)
</code></pre>
<pre><code>
Estimate...  1872 
SE.........  665.99 
T-stat.....  2.8108 
p.val......  0.0049413 

Original number of observations..............  445 
Original number of treated obs...............  185 
Matched number of observations...............  185 
Matched number of observations  (unweighted).  185
</code></pre><pre><code class="lang-r">&gt; 
&gt; psens(mgen1, Gamma = <span class="hljs-number">1.5</span>, GammaInc = <span class="hljs-number">0.1</span>)
</code></pre>
<pre><code>
 Rosenbaum Sensitivity Test for Wilcoxon Signed Rank P-Value 

Unconfounded estimate ....  0.0037 

 Gamma Lower bound Upper bound
   1.0      0.0037      0.0037
   1.1      0.0006      0.0158
   1.2      0.0001      0.0478
   1.3      0.0000      0.1102
   1.4      0.0000      0.2063
   1.5      0.0000      0.3293

 Note: Gamma is Odds of Differential Assignment To
 Treatment Due to Unobserved Factors
</code></pre><pre><code class="lang-r">&gt; hlsens(mgen1, Gamma = <span class="hljs-number">1.5</span>, GammaInc = <span class="hljs-number">0.1</span>, <span class="hljs-number">0.1</span>)
</code></pre>
<pre><code>
 Rosenbaum Sensitivity Test for Hodges-Lehmann Point Estimate 

Unconfounded estimate ....  1725 

 Gamma Lower bound Upper bound
   1.0     1725.30        1725
   1.1     1068.20        1783
   1.2      762.67        2028
   1.3      524.17        2357
   1.4      292.17        2618
   1.5       92.47        2899

 Note: Gamma is Odds of Differential Assignment To
 Treatment Due to Unobserved Factors
</code></pre>
                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../intro/visualizations.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../missing/missing.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        

    
    <script src="../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
